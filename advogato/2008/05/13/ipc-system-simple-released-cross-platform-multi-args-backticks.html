<!DOCTYPE html>
<!--
    Based upon Striped 2.5 by HTML5 Up!
    html5up.net | @n33co
    Updated for Jekyll by Paul Fenwick | @pjf
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="en">
    <head prefix="og: http://ogp.me/ns#">
        <title>IPC::System::Simple released - Cross-platform, multi-arg backticks</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />

        


    <meta property="og:image" content="http://pjf.id.au/images/pjf_square.jpg"  />
    <link rel="image_src"        href="http://pjf.id.au/images/pjf_square.jpg"  />


<meta property="og:title" content="IPC::System::Simple released - Cross-platform, multi-arg backticks"  />
<meta property="og:url"   content="http://pjf.id.au/advogato/2008/05/13/ipc-system-simple-released-cross-platform-multi-args-backticks.html" />

<!-- This should be expanded to allow for 'article' types -->
<meta property="og:type"  content="website" />




    <meta name="keywords" content="advogato" />



<meta property="fb:admins" content="549169610" />


        <link rel="icon" type="image/png" href="/images/favicon.png" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml"/>

        
            <link rel="alternate" type="application/rss+xml" title="All Comments" href="http://pjf.disqus.com/latest.rss"/>
        

        <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400italic,700|Open+Sans+Condensed:300,700" rel="stylesheet" />
        <script src="/js/jquery.min.js"></script>
        <script src="/js/skel.min.js"></script>
        <script src="/js/skel-panels.min.js"></script>
        <script src="/js/init.js"></script>
        <noscript>
            <link rel="stylesheet" href="/css/skel-noscript.css" />
            <link rel="stylesheet" href="/css/style.css" />
            <link rel="stylesheet" href="/css/style-desktop.css" />
            <link rel="stylesheet" href="/css/style-wide.css" />
        </noscript>
        <!--[if lte IE 9]><link rel="stylesheet" href="css/ie9.css" /><![endif]-->
        <!--[if lte IE 8]><script src="js/html5shiv.js"></script><link rel="stylesheet" href="css/ie8.css" /><![endif]-->
        <!--[if lte IE 7]><link rel="stylesheet" href="css/ie7.css" /><![endif]-->

        <!-- TODO: Only load on fancybox pages -->
<link rel="stylesheet" href="/fancybox/source/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


        <link rel="stylesheet" href="/css/pygments.css" />
        <link rel="stylesheet" href="/css/pjf.css" />

    </head>
    <!--
        Note: Set the body element's class to "left-sidebar" to position the sidebar on the left.
        Set it to "right-sidebar" to, you guessed it, position it on the right.
    -->
    <body class="left-sidebar">
    
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-47199716-1']);
  _gaq.push(['_gat._anonymizeIp']); // Better user privacy
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


    

<p class="h-card hidden">
    <img class="u-photo" src="/images/pjf_square.jpg" alt=""/>
    <a class="p-name u-url" href="http://pjf.id.au">paul.j.fenwick</a>
</p>

        <div id="wrapper">
            <div id="content">
                <div id="content-inner">
                    
    


<article class="is-post h-entry">
    <header>
    

    <h2 class="p-name">IPC::System::Simple released - Cross-platform, multi-arg backticks</h2>
    
        <!-- This makes G+ bots happy -->
        <span class="byline">By Paul Fenwick</span>
    
    <p class="edit-post">
(You can <a href="https://github.com/pjf/pjf.github.io/edit/build/advogato/_posts/2008-05-13-ipc-system-simple-released-cross-platform-multi-args-backticks.html">suggest changes</a>
to this post.)
</p>


</header>

    <div class="info">
    
    <a href="http://pjf.id.au/advogato/2008/05/13/ipc-system-simple-released-cross-platform-multi-args-backticks.html" class="u-url nodecorate">
        <time class="date dt-published" datetime="2008-05-13 10:58:42"> <span class="month">May</span>
            <span class="day">13</span>
            <span class="year"><span>,</span> 2008</span>
        </time>
    </a>


    <!-- Note: You can change the number of list items in "stats" to whatever you want. -->

    <!--
        <ul class="stats">
            <li><a href="#" class="fa fa-comment">16</a></li>
            <li><a href="#" class="fa fa-heart">32</a></li>
            <li><a href="#" class="fa fa-twitter">64</a></li>
            <li><a href="#" class="fa fa-facebook">128</a></li>
        </ul>
    -->
</div>


    

    <div class="e-content">
        <p><b><a href="http://search.cpan.org/perldoc?IPC::System::Simple">IPC::System::Simple</a>
released - Cross-platform, multi-arg backticks</b><br>
One of my greatest itches with Perl is the difficultly in
doing things correctly with the <tt>system()</tt> command,
which allows one to run a process and wait for it to finish,
and backticks (aka <tt>qx()</tt>), which allows one to run a
process and capture its output.
<p>
It's not that these commands are hard to use. 
<tt>system("mount /dev/backup")</tt> and I've got my backup
media mounted.  <tt>my $config = qx(ipconfig)</tt> and I've
got my Windows IP configuration.  They're dead easy to use,
they're just a pain to tell if they <i>worked</i>.
<p>
After running, these commands set a special variable named
<tt>$?</tt>, or <tt>$CHILD_ERROR</tt> if you've told perl to
<tt>use English</tt>.  This variable is designed to be
"friendly" to "C programmers", who are familiar with the
return value of the <tt>wait()</tt> system call.  But who on
earth <i>wants</i> to be familiar with the return value of
<tt>wait()</tt>?  After teaching <i>thousands</i> of people
Perl over the last seven years, I've only had <i>two</i>
people admit to know what the <tt>wait()</tt> return value
looks like, and both of them needed therapy afterwards. 
It's a packed bit-string, and is grossly unfriendly for
anyone to use in any language.
<p>
So, the usual state of affairs for many developers is they
go through their day using <tt>system()</tt> and backticks
and completely ignoring <tt>$?</tt>, because it's too hard.
 Then one day a disaster happens where they discover that
all their backups are empty, or all their files are
corrupted, or all their furniture has been repossessed,
because their calls to <tt>system()</tt> have been failing
for years, but nobody noticed because <tt>$?</tt> was too
ugly to contemplate.
<p>
Those developers who have been through this process, or seen
other people's lives ruined usually try to take a little
more care.  They recall that <tt>$?</tt> will be exactly
zero if the process ran to completion and returned a zero
exit status, which usually indicates success.  Their code
becomes littered with statements like <tt>$? and die $?</tt>
or <tt>system(...) and die $?</tt>.  That makes them feel
warm and fuzzy until they discover it doesn't work.  Their
command may legitimately return a range of statuses to
indicate success, and a whole bunch of things to indicate
failure.  Worse still, printing the contents of <tt>$?</tt>
as an error message is worse than useless.  Nobody
understands what the hell it means; if you did, you wouldn't
be printing it.
<p>
The end result of all this is that Perl sucks at something
it's <i>supposed</i> to be good at; namely firing off system
commands and being awesome for system administrators.  It is
this problem that <a href="http://search.cpan.org/perldoc?IPC::System::Simple">IPC::System::Simple</a>
solves.
<p>
Put simply, if you're using <tt>IPC::System::Simple</tt>,
you can replace all your calls to <tt>system()</tt> with
<tt>run()</tt>, and all your calls to backticks with
<tt>capture()</tt>, and it will all work the same way,
except that you'll get incredibly useful messages on error.
 Got a funny exit status?  It'll tell you what it is, and
the command that caused it.  Killed by a signal?  You'll get
not just the number, but its <i>name</i>, as well a whether
it dumped core.  Passed in tainted data?  You'll get told
what was tainted.  And it gets better.
<p>
Let's say that you're using <a href="http://www.samba.org/rsync/">rsync</a> to backup your
files from an active filesystem.  It exits with 0 for good,
and 24 for "files went missing".  On an active filesystem,
files disappearing can be considered normal, so we'd like
both of these to be considered 'fine'.  Anything else, we'd
like to get told.  Can we do this with
<tt>IPC::System::Simple</tt>?  We sure can!  Just provide
the list of acceptable exit statuses as the first argument:
<blockquote><tt>run( [0,24], "rsync ....")</tt></blockquote>
<p>
<tt>IPC::System::Simple</tt>'s <tt>run</tt> command also
works the way that <a href="http://search.cpan.org/perldoc?perlsec">the Perl
security pages</a> say that <tt>system()</tt> should run. 
That is, when called with multiple arguments, it bypasses
the shell.  Perl's regular <tt>system()</tt> when called
with multiple arguments will go and use the shell
<i>anyway</i> when on a Windows system, which is bad if you
were trying to avoid shell meta-characters.
<p>
You can get the same shell-bypassing behaviour with
<tt>capture()</tt>; just pass it in multiple arguments and
you're done.  This even works under Windows, which normally
doesn't even support shell-bypassing pipes, let alone
checking your command's return values and formatting your
errors afterwards.  You even get the full 16-bit Windows
exit value made available to you, which is something
<tt>$?</tt> and its dark terrors will never give you.
<p>
Best of all, installing <a href="http://search.cpan.org/perldoc?IPC::System::Simple">IPC::System::Simple</a>
is a breeze.  It's pure perl, with <i>no</i> dependencies on
non-core modules.  Even if you have no other way of
installing modules, you can just copy the <tt>.pm</tt> file
into an appropriate directory and you're done.
<p>
Don't put up with the tragedies and uncertain futures that
<tt>system()</tt> and backticks can bring.  Use <a href="http://search.cpan.org/perldoc?IPC::System::Simple">IPC::System::Simple</a>
and make handling your system interactions correctly a
painless experience.

    </div>

    <div class="share-container">
    <div class="share-buttons">
        <p>Share:</p>
        <a href="https://www.facebook.com/sharer/sharer.php?u=http://pjf.id.au/advogato/2008/05/13/ipc-system-simple-released-cross-platform-multi-args-backticks.html" target="_blank"><i class="fa fa-facebook-square fa-2x"></i></a>
        <a href="https://twitter.com/intent/tweet?text=IPC%3A%3ASystem%3A%3ASimple+released+-+Cross-platform%2C+multi-arg+backticks (by @pjf):&amp;url=http://pjf.id.au/advogato/2008/05/13/ipc-system-simple-released-cross-platform-multi-args-backticks.html" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
        <a href="https://www.linkedin.com/shareArticle?url=http://pjf.id.au/advogato/2008/05/13/ipc-system-simple-released-cross-platform-multi-args-backticks.html" target="_blank"><i class="fa fa-linkedin-square fa-2x"></i></a>
        <a href="https://plus.google.com/share?url=http://pjf.id.au/advogato/2008/05/13/ipc-system-simple-released-cross-platform-multi-args-backticks.html&amp;hl=en-GB" target="_blank"><i class="fa fa-google-plus-square fa-2x"></i></a>
        <a href="http://pinterest.com/pin/create/button/?url=http://pjf.id.au/advogato/2008/05/13/ipc-system-simple-released-cross-platform-multi-args-backticks.html&amp;description=&amp;media=http://pjf.id.au" target="_blank"><i class="fa fa-pinterest-square fa-2x"></i></a>
    </div>
    <div class="share-buttons pull-right">
        <p>Subscribe:</p>
        
            <a href="https://twitter.com/pjf"><i class="fa fa-twitter-square fa-2x"></i></a>
        
        
            <a href="https://facebook.com/paul.fenwick"><i class="fa fa-facebook-square fa-2x"></i></a>
        
        <a href="/feed.xml"><i class="fa fa-rss-square fa-2x"></i></a>
    </div>
</div>


    

<div class="amplify">
    <i class="fa fa-quote-left fa-2x pull-left fa-border darker"></i>
    <h4><a href="http://www.gatesfoundation.org/Who-We-Are/Resources-and-Media/Annual-Letters-List/Annual-Letter-2014">3 Myths That Block Progress For The Poor</a></h4>
    <p><a  href="http://www.gatesfoundation.org/Who-We-Are/Resources-and-Media/Annual-Letters-List/Annual-Letter-2014" class="plain darker">
    The belief that the world can’t solve extreme poverty and disease isn’t
    just mistaken. It is harmful. &nbsp;&nbsp;</a>
    <a href="http://www.gatesfoundation.org/Who-We-Are/Resources-and-Media/Annual-Letters-List/Annual-Letter-2014">Read more...</a>
    </p>
</div>


    

    
<div class="tip-box">
    <p>
        <img class="pull-right bitcoin" src="/images/bitcoin-qr.png" alt="Bitcoin QR code" />
        <a href="https://patreon.com/_pjf">
            <svg xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 8 8"
                width="8em"
                height="8em"
                class="pull-left patreon"
                fill="#ff5900">
                    <path d="M2.32081783.3678855c.869042-.40526652 1.88661925-.47774603 2.80665096-.20727372.80652418.2346745 1.53190822.73363407 2.0426921 1.3983242.5050198.6523156.79854318 1.4641745.82647667 2.28752405.0354711.8511923-.21060967 1.71122356-.6952336 2.4134793-.71030882 1.0518368-1.9482503 1.72713368-3.22254963 1.73950823-.63803645.0008839-1.2760729.00044195-1.91366597 0 .00532067-1.34042898.0004434-2.68085797.00310373-4.0217289.00221694-.50647268.23011877-1.00499028.60921618-1.34131288.36180524-.3279256.85973083-.5002854 1.3474585-.46404565.50457642.03093638.98831357.2859405 1.30267622.68015833.3232304.3968695.46422805.93295272.38131434 1.4376576-.08114014.53122177-.41368172 1.01603898-.87790977 1.2882791-.5373872.3252739-1.2406018.3345548-1.7935076.04021728.00044338.43487706-.0008868.86975412.00044338 1.30463118.4934917.14407512 1.02201113.16838228 1.52392723.0539177.7431196-.16219502 1.4144102-.6174017 1.8444973-1.24187455.40969124-.5855814.59946164-1.31788962.52851943-2.02810043-.06030086-.6514317-.34052257-1.27944013-.78302457-1.7620476-.41013462-.4507872-.95860653-.77561914-1.55363427-.913507-.6837055-.162195-1.42372137-.07866678-2.05200326.23600036C1.64553673 1.7542771.962718 2.8206982.95207668 3.932198.95030312 5.2876532.95163328 6.6435504.9511899 7.99944755c-.3165796.0008839-.63360256.00044195-.95062554.00044195-.0004434-1.32584468.0004434-2.65168938-.0004434-3.97709212-.00443387-.56569374.11306415-1.13227137.3440697-1.6493508C.73215587 1.49662128 1.44778534.7691745 2.32081784.3678855z" />
            </svg>
        </a>
        This site is ad-free, and all text, style, and code may be re-used under
        a <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 license</a>.
        If like what I do, please consider
        <a href="https://patreon.com/_pjf">supporting me on Patreon</a>,
        or <a href="bitcoin:1P9iGHMiQwRrnZuA6USp5PNSuJrEcH411f">donating via Bitcoin</a> (1P9iGHMiQwRrnZuA6USp5PNSuJrEcH411f).
    </p>
</div>



    

<div id="disqus_thread"></div>
<script type="text/javascript">

    var disqus_shortname  = "pjf"; 
    var disqus_identifier = "/advogato/2008/05/13/ipc-system-simple-released-cross-platform-multi-args-backticks.html";
    var disqus_title      = "IPC::System::Simple released - Cross-platform, multi-arg backticks";
    var disqus_url        = "http://pjf.id.au/advogato/2008/05/13/ipc-system-simple-released-cross-platform-multi-args-backticks.html";

    /* Make sure that once disqus renders, we trigger any events that
     * need to happen on page resize. Otherwise our left-bar looks funny. */

    function disqus_config() {
        this.callbacks.onReady.push(function() {
            var $sc = $('#sidebar, #content');

if (skel.isActive('mobile') || skel.isActive('narrower'))
    $sc.css('min-height', '0').css('height', 'auto');
else
    $sc.css('min-height', $(window).height()).css('height', $(document).height());


        });

        this.callbacks.onNewComment.push(function() {
            var $sc = $('#sidebar, #content');

if (skel.isActive('mobile') || skel.isActive('narrower'))
    $sc.css('min-height', '0').css('height', 'auto');
else
    $sc.css('min-height', $(window).height()).css('height', $(document).height());


        });
    }

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>




</article>


                    


                </div>
            </div>

            <!-- Sidebar -->
<div id="sidebar">
    <!-- Logo -->
    <div id="logo"><h1><a href="/">pjf</a></h1></div>

    <section class="find_me">
    
        <a href="https://twitter.com/pjf" rel="me"><i class="fa fa-twitter-square  fa-3x"  ></i></a>
    
    
        <a href="https://facebook.com/paul.fenwick" rel="me"><i class="fa fa-facebook-square fa-3x"  ></i></a>
    
    
        <a href="https://github.com/pjf" rel="me"><i class="fa fa-github-square   fa-3x"  ></i></a>
    
    <br />
    
        <a href="https://flickr.com/photos/pfenwick" rel="me"><i class="fa fa-flickr fa-3x"></i></a>
    
    
        <a href="https://plus.google.com/+PaulFenwick" rel="me"><i class="fa fa-google-plus-square fa-3x"  ></i></a>
    
    <a href="/feed.xml"><i class="fa fa-rss-square fa-3x"></i></a>
    </section>

    <!-- Nav -->
    <nav id="nav">
        <ul>
            <!-- <li class="current_page_item"><a href="/"></a></li> -->
            <li><a href="/">Latest Posts</a></li>
        
            <li><a href="/talks">Talks</a></li>
        
            <li><a href="/ethics">Ethics</a></li>
        
            <li><a href="/tech">Technology</a></li>
        
            <li><a href="/depression">Depression</a></li>
        
            <li><a href="/df">Dwarf Fortress</a></li>
        
            <li><a href="/advogato">Older Posts</a></li>
        
        </ul>
    </nav>

    
        <section class="is-search">
            <form id="cse-search-box" action="http://google.com/cse">
            <input type="hidden" name="cx" value="partner-pub-5040518412301671:2427815553" />
            <input type="hidden" name="ie" value="UTF-8" />
            <input class="text" type="text" name="q" placeholder="Search" />
        </form>
        Search powered by Google.
        </section>
    

    <!-- Text -->
    <section class="is-text-style1">
        <div class="inner">
            <p>
            
            All text, style, and code on this website is free for you to use
            under the <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0</a> license.
            
                If you like what I do, consider <a href="https://patreon.com/_pjf">supporting me on Patreon</a>.
            
            </p>
        </div>
    </section>

    <!-- Recent Posts -->
    <section class="is-recent-posts">
        <header>
            <h2>Recent Posts</h2>
        </header>

        <ul>
        
            <li><a href="/tech/2018/07/17/foss-outreach.html">Seeking a humanitarian FOSS outreach position</a>
        
            <li><a href="/depression/2018/06/09/bipolar.html">I Have Bipolar—An Open Letter</a>
        
            <li><a href="/ethics/2016/07/26/dystopian-oxygen-security.html">A Dystopian Future From Climate Change</a>
        
            <li><a href="/tech/2016/05/18/oscon-contribute.html">Visit OSCON Contribute 2016</a>
        
            <li><a href="/depression/2016/04/12/honest-conversation-about-mental-health.html">An honest conversation about my mental health</a>
        
            <li><a href="/personal/2016/04/01/rick-astley-hotline-upgraded.html">National Rick Astley Hotline Upgraded</a>
        
            <li><a href="/personal/2016/03/21/cure-evangelism.html">Cure Evangelism</a>
        
            <li><a href="/ethics/2016/02/14/changing-the-world-is-done-in-small-steps.html">Changing The World Is Done In Small Steps</a>
        
            <li><a href="/tech/2016/02/02/win-my-hat-at-lca2016.html">Win my hat at linux.conf.au 2016</a>
        
            <li><a href="/personal/2016/01/06/will-pap-smears-no-longer-be-free.html">Fact Check: Will Pap Smears Still Be Covered by Medicare?</a>
        
        </ul>
    </section>

    <!-- Recent Comments -->
    <!-- <section class="is-recent-comments">
        <header>
            <h2>Recent Comments</h2>
        </header>
        <ul>
            <li>case on <a href="#">Now Full Cyborg</a></li>
            <li>molly on <a href="#">Untitled Post</a></li>
            <li>case on <a href="#">Temporal Flux</a></li>
        </ul>
    </section> -->

    <!-- Calendar -->

    <!-- <section class="is-calendar">
        <div class="inner">
            <table>
                <caption>February 2013</caption>
                <thead>
                    <tr>
                        <th scope="col" title="Monday">M</th>
                        <th scope="col" title="Tuesday">T</th>
                        <th scope="col" title="Wednesday">W</th>
                        <th scope="col" title="Thursday">T</th>
                        <th scope="col" title="Friday">F</th>
                        <th scope="col" title="Saturday">S</th>
                        <th scope="col" title="Sunday">S</th>
                    </tr>
            </thead>
            <tbody>
                    <tr>
                        <td colspan="4" class="pad"><span>&nbsp;</span></td>
                        <td><span>1</span></td>
                        <td><span>2</span></td>
                        <td><span>3</span></td>
                    </tr>
                    <tr>
                        <td><span>4</span></td>
                        <td><span>5</span></td>
                        <td><a href="#">6</a></td>
                        <td><span>7</span></td>
                        <td><span>8</span></td>
                        <td><span>9</span></td>
                        <td><a href="#">10</a></td>
                    </tr>
                    <tr>
                        <td><span>11</span></td>
                        <td><span>12</span></td>
                        <td><span>13</span></td>
                        <td class="today"><a href="#">14</a></td>
                        <td><span>15</span></td>
                        <td><span>16</span></td>
                        <td><span>17</span></td>
                    </tr>
                    <tr>
                        <td><span>18</span></td>
                        <td><span>19</span></td>
                        <td><span>20</span></td>
                        <td><span>21</span></td>
                        <td><span>22</span></td>
                        <td><a href="#">23</a></td>
                        <td><span>24</span></td>
                    </tr>
                    <tr>
                        <td><a href="#">25</a></td>
                        <td><span>26</span></td>
                        <td><span>27</span></td>
                        <td><span>28</span></td>
                        <td class="pad" colspan="3"><span>&nbsp;</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section> -->

    <!-- Copyright -->
    <div id="copyright">
        <p>
            &copy; Paul Fenwick<br />
            Design: <a href="http://html5up.net/">HTML5 UP</a><br />
            Site Based On: <a href="https://github.com/pjf/pjf.github.io">pjf.github.io</a>
        </p>
    </div>
</div>

            
        </div>
    <!-- TODO: Only load on fancybox pages -->
<script type="text/javascript">
    $(document).ready(function() {
        $(".fancybox").fancybox({
            closeClick: true,
            closeBtn: false,
            arrows: false,
            mouseWheel: false,
        });
    });
</script>




    </body>
</html>

